import{cars}from"./catalog.js";const cardsContainer=document.querySelector(".cards__content"),emptyMessage=document.querySelector(".cards__content-empty");let cardsToShow=5;function updateCardsToShow(){const e=window.innerWidth;cardsToShow=e>=1280?5:e>=1024?4:e>=580?6:3}const btnLoadMore=document.querySelector(".cards__btn-else");function createPaginationItem(e){const t=document.createElement("li");return t.classList.add("card__pagination-item"),t.setAttribute("data-index",e),t.classList.toggle("active",0===e),t}function updatePagination(e,t){if(!e.querySelector(".card__top").classList.contains("swiper-initialized")){e.querySelectorAll(".card__pagination-item").forEach((e=>e.classList.remove("active"))),e.querySelector(`.card__pagination-item[data-index="${t}"]`).classList.add("active")}}function resetPagination(e){if(!e.querySelector(".card__top").classList.contains("swiper-initialized")){e.querySelectorAll(".card__pagination-item").forEach((e=>e.classList.remove("active"))),e.querySelector('.card__pagination-item[data-index="0"]').classList.add("active")}}function fillCardData(e,t){e.querySelector(".card__price-js").textContent=t.price.toLocaleString("ru-RU");e.querySelector(".card__car-brand").textContent=`${t.brand}`;e.querySelector(".card__car-model").textContent=`${t.model}`;e.querySelector(".card__transmission").textContent=`${t.transmission}`;e.querySelector(".card__motor").textContent=`${t.motor}`;e.querySelector(".card__mileage").textContent=t.mileage.toLocaleString("ru-RU");e.querySelector(".card__motor-type").textContent=`${t.motorType}`;e.querySelector(".card__power").textContent=`${t.power}`;e.querySelector(".card__drive").textContent=`${t.drive}`}function createCard(e){const t=document.querySelector(".card-template").content.cloneNode(!0),r=t.querySelector(".card"),n=t.querySelector(".card__top");if(!r)return null;r.setAttribute("data-year",e.year);const o=t.querySelector(".card__images"),i=t.querySelector(".card__image-item"),s=t.querySelector(".card__pagination-list");o.innerHTML="",s.innerHTML="",e.img.length>1?s.style.display="flex":s.style.display="none",e.img.forEach(((t,n)=>{const a=i.cloneNode(!0);a.setAttribute("data-index",n);const l=a.querySelector("img");l.src=t,l.alt=`${e.brand} ${e.model}`,a.addEventListener("mouseenter",(e=>{updatePagination(r,e.currentTarget.dataset.index)})),a.addEventListener("mouseleave",(()=>{resetPagination(r)})),o.appendChild(a);const c=createPaginationItem(n);s.appendChild(c)})),fillCardData(r,e);let a=null;n.addEventListener("slideChange",(()=>{const e=n.swiper.activeIndex;updatePagination(r,e)})),window.innerWidth<=1024&&e.img.length>1?a||(a=new Swiper(n,{slideClass:"card__image-item",wrapperClass:"card__images",spaceBetween:10,slidesPerView:1,pagination:{el:".card__pagination-list",clickable:!0}})):a&&(a.destroy(!0,!0),a=null);const l=t.querySelector(".card__btn-popup");l&&l.addEventListener("click",(()=>{openPopup(popupForm);const e=document.querySelector(".page");e?(e.classList.add("stop-scroll"),console.log("Class stop-scroll added"),console.log(e)):console.log("Element .page not found")}));const c=t.querySelector(".card__btn-info");return c&&c.addEventListener("click",(()=>openPopupCard(e))),t}function renderCards(e){const t=document.querySelector(".cards__content");t.querySelectorAll(".card").forEach((e=>e.remove()));e.slice(0,cardsToShow).forEach((e=>{const r=createCard(e);r&&t.appendChild(r)}));const r=document.querySelector(".cards__btn-else");cardsToShow>=e.length?r.style.display="none":r.style.display="block",0===e.length?emptyMessage.style.display="block":emptyMessage.style.display="none"}function openPopupCard(e){const t=document.querySelector(".popup-card");t.querySelector(".popup-card__car-brand").textContent=e.brand,t.querySelector(".popup-card__car-model").textContent=e.model,t.querySelector(".popup-card__transmission").textContent=e.transmission,t.querySelector(".popup-card__motor").textContent=e.motor,t.querySelector(".popup-card__mileage").textContent=e.mileage.toLocaleString("ru-RU"),t.querySelector(".popup-card__motor-type").textContent=e.motorType,t.querySelector(".popup-card__power").textContent=e.power,t.querySelector(".popup-card__drive").textContent=e.drive,t.querySelector(".popup-card__body-type").textContent=e.bodyType,t.querySelector(".popup-card__equipment").textContent=e.equipment,t.querySelector(".popup-card__color").textContent=e.color,t.querySelector(".popup-card__year").textContent=e.year,t.querySelector(".popup-card__condition").textContent=e.condition,t.querySelector(".popup-card__guarantee").textContent=e.guarantee,t.querySelector(".popup-card__description").textContent=e.description,t.querySelector(".popup-card__price-js").textContent=e.price.toLocaleString("ru-RU");const r=t.querySelector(".popup-card__slide"),n=t.querySelector(".slider .popup-card__slider-wrapper"),o=t.querySelector(".slider2 .popup-card__slider-wrapper");n.innerHTML="",o.innerHTML="",e.img.forEach((t=>{const i=r.cloneNode(!0),s=i.querySelector("img");s.src=t,s.alt=`${e.brand} ${e.model}`,n.appendChild(i);const a=r.cloneNode(!0),l=a.querySelector("img");l.src=t,l.alt=`${e.brand} ${e.model}`,o.appendChild(a)}));const i=new Swiper(".slider",{slideClass:"popup-card__slide",wrapperClass:"popup-card__slider-wrapper",spaceBetween:10,slidesPerView:4,breakpoints:{760:{spaceBetween:14},1280:{spaceBetween:20}}});new Swiper(".slider2",{slideClass:"popup-card__slide",wrapperClass:"popup-card__slider-wrapper",spaceBetween:10,pagination:{el:".popup-card__pagination",type:"bullets"},navigation:{nextEl:".popup-card__btn-next",prevEl:".popup-card__btn-prev"},thumbs:{swiper:i}});t.classList.add("open"),header.style.opacity="0",hideScroll()}btnLoadMore.addEventListener("click",(()=>{cardsToShow+=6,renderCards(filteredCars)})),updateCardsToShow(),cardsContainer&&cars.forEach((e=>{const t=createCard(e);t&&cardsContainer.appendChild(t)}));let filteredCars=[],selectedBrands=[],yearFrom=null,yearTo=null;const yearFromInput=document.getElementById("year-from"),yearToInput=document.getElementById("year-to"),priceRange=document.getElementById("price-range"),minPriceOutput=document.getElementById("min-price"),maxPriceOutput=document.getElementById("max-price"),resetButton=document.querySelector(".filters__btn-reset"),filterInputs=document.querySelectorAll(".filter-input"),filterTypeBtns=document.querySelectorAll(".type-else .filters__btn"),mileageBtns=document.querySelectorAll(".type-car .filters__btn");let selectedType="auto",selectedMileage="all";filterTypeBtns.forEach((e=>{e.addEventListener("click",(e=>{selectedType=e.currentTarget.getAttribute("data-type"),updateCardsToShow(),filterCars(),resetButton.classList.add("active"),resetButton.disabled=!1}))})),mileageBtns.forEach((e=>{e.addEventListener("click",(e=>{selectedMileage=e.currentTarget.getAttribute("data-drive"),updateCardsToShow(),filterCars(),resetButton.classList.add("active"),resetButton.disabled=!1}))}));const defaultMinPrice=0,defaultMaxPrice=15e6;let minPrice=0,maxPrice=15e6;noUiSlider.create(priceRange,{start:[0,15e6],connect:!0,range:{min:0,max:15e6},step:1e4,format:{to:function(e){return parseInt(e).toLocaleString("ru-RU")},from:function(e){return e.replace(/\s/g,"")}}}),priceRange.noUiSlider.on("update",(function(e,t){minPrice=parseInt(e[0].replace(/\s/g,""),10),maxPrice=parseInt(e[1].replace(/\s/g,""),10),minPriceOutput.textContent=minPrice.toLocaleString("ru-RU"),maxPriceOutput.textContent=maxPrice.toLocaleString("ru-RU"),filterCars(),checkFiltersChanged()}));const headingFilters=document.querySelectorAll(".select-heading-js"),brandItems=document.querySelectorAll(".filters__brand-item"),titleAll=document.querySelector(".filters__current-title-all"),titleChoice=document.querySelector(".filters__current-title-choice");let isBrandListExpanded=!1;headingFilters.forEach((e=>{e.addEventListener("click",(()=>{const t=e.classList.contains("open");headingFilters.forEach((e=>{e.classList.remove("open"),isBrandListExpanded=!1})),t||(e.classList.add("open"),isBrandListExpanded=!0),isBrandListExpanded?selectedBrandList.classList.remove("visible"):selectedBrandList.classList.add("visible")}))})),brandItems.forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("data-brand");selectedBrands.includes(t)?(selectedBrands=selectedBrands.filter((e=>e!==t)),e.classList.remove("selected"),removeBrandFromList(t)):(selectedBrands.push(t),e.classList.add("selected"),addBrandToList(t)),selectedBrands.length>0?(titleAll.style.display="none",titleChoice.style.display="block"):(titleAll.style.display="block",titleChoice.style.display="none"),checkFiltersChanged(),filterCars()}))}));const selectedBrandList=document.querySelector(".filters__brand-list-selected");function addBrandToList(e){const t=document.createElement("li");t.classList.add("selected-brand");const r=document.createElement("p");r.classList.add("selected-brand__name"),r.textContent=e;const n=document.createElement("button");n.type="button",n.classList.add("selected-brand__del"),n.innerHTML='\n    <svg width="8" height="7" viewBox="0 0 8 7" fill="none" xmlns="http://www.w3.org/2000/svg">\n                            <path\n                              d="M3.55815 3.18594L0.966278 0.594692C0.937224 0.565637 0.914176 0.531143 0.898452 0.493181C0.882727 0.455219 0.874634 0.414532 0.874634 0.373442C0.874634 0.332352 0.882727 0.291664 0.898452 0.253702C0.914176 0.21574 0.937224 0.181247 0.966278 0.152192C0.995333 0.123137 1.02983 0.100089 1.06779 0.0843646C1.10575 0.0686402 1.14644 0.0605469 1.18753 0.0605469C1.22862 0.0605469 1.26931 0.0686402 1.30727 0.0843646C1.34523 0.100089 1.37972 0.123137 1.40878 0.152192L4.00003 2.74407L6.59128 0.152192C6.64996 0.0935124 6.72954 0.0605469 6.81253 0.0605469C6.89551 0.0605469 6.9751 0.0935124 7.03378 0.152192C7.09246 0.210871 7.12542 0.290457 7.12542 0.373442C7.12542 0.456427 7.09246 0.536013 7.03378 0.594692L4.4419 3.18594L7.03378 5.77719C7.09246 5.83587 7.12542 5.91546 7.12542 5.99844C7.12542 6.08143 7.09246 6.16101 7.03378 6.21969C6.9751 6.27837 6.89551 6.31134 6.81253 6.31134C6.72954 6.31134 6.64996 6.27837 6.59128 6.21969L4.00003 3.62782L1.40878 6.21969C1.3501 6.27837 1.27051 6.31134 1.18753 6.31134C1.10454 6.31134 1.02496 6.27837 0.966278 6.21969C0.907599 6.16101 0.874634 6.08143 0.874634 5.99844C0.874634 5.91546 0.907599 5.83587 0.966278 5.77719L3.55815 3.18594Z"\n                              fill="white" />\n                          </svg>\n  ',n.addEventListener("click",(r=>{r.stopPropagation(),selectedBrands=selectedBrands.filter((t=>t!==e)),t.remove(),removeBrandFromList(e),checkFiltersChanged(),filterCars()})),t.appendChild(r),t.appendChild(n),selectedBrandList.appendChild(t)}function removeBrandFromList(e){selectedBrandList.querySelectorAll(".selected-brand").forEach((t=>{t.querySelector(".selected-brand__name").textContent===e&&t.remove()}));document.querySelectorAll(".filters__brand-list .brand-item").forEach((t=>{t.getAttribute("data-brand")===e&&t.classList.remove("selected")}))}function filterCars(){filteredCars=cars.filter((e=>{const t=e.mileage,r=e.type===selectedType,n="new"===selectedMileage&&0===t||"run"===selectedMileage&&t>0||"all"===selectedMileage,o=0===selectedBrands.length||selectedBrands.includes(e.brand),i=parseInt(e.year.replace(/\sг\.$/,""),10),s=(null===yearFrom||i>=yearFrom)&&(null===yearTo||i<=yearTo),a=e.price;return r&&n&&o&&s&&(a>=minPrice&&a<=maxPrice)})),renderCards(filteredCars)}function checkFiltersChanged(){let e=!1;const t=parseInt(minPriceOutput.textContent.replace(/\s/g,""),10),r=parseInt(maxPriceOutput.textContent.replace(/\s/g,""),10);0===t&&15e6===r||(e=!0),selectedBrands.length>0&&(e=!0),null===yearFrom&&null===yearTo||(e=!0),e?(resetButton.classList.add("active"),resetButton.disabled=!1):(resetButton.classList.remove("active"),resetButton.disabled=!0)}function resetFilters(){filterInputs.forEach((e=>{e.value=e.defaultValue})),priceRange.noUiSlider.set([0,15e6]),minPriceOutput.textContent="0",maxPriceOutput.textContent="15 000 000",selectedBrands=[],brandItems.forEach((e=>{e.classList.remove("selected")})),selectedBrandList.innerHTML="",titleAll.style.display="block",titleChoice.style.display="none",yearFrom=null,yearTo=null,yearFromInput.value="",yearToInput.value="",selectedType="auto",selectedMileage="all",removeActiveClass(filtersBtnType),removeActiveClass(filtersBtnElse),filterTypeBtns.forEach((e=>{"auto"===e.dataset.type&&e.classList.add("active")})),mileageBtns.forEach((e=>{"all"===e.dataset.drive&&e.classList.add("active")})),resetButton.classList.remove("active"),resetButton.disabled=!0,checkFiltersChanged(),updateCardsToShow(),filterCars()}yearFromInput.addEventListener("input",(()=>{yearFrom=parseInt(yearFromInput.value,10)||null,filterCars(),checkFiltersChanged()})),yearToInput.addEventListener("input",(()=>{yearTo=parseInt(yearToInput.value,10)||null,filterCars(),checkFiltersChanged()})),filterCars(),window.addEventListener("resize",(()=>{updateCardsToShow(),renderCards(filteredCars)})),filterInputs.forEach((e=>{e.addEventListener("change",checkFiltersChanged),e.addEventListener("input",checkFiltersChanged)})),resetButton.addEventListener("click",resetFilters),checkFiltersChanged();const pageBody=document.querySelector(".page"),bodyIntro=document.querySelector(".intro__body"),contentIntro=document.querySelector(".intro__content"),logosIntro=document.querySelector(".intro__logos"),header=document.querySelector(".header"),scrollBarWidth=window.innerWidth-document.documentElement.clientWidth,updateStyles=()=>{let e;bodyIntro.style.paddingBottom=logosIntro.offsetHeight+"px",e=window.innerWidth<=768?36:window.innerWidth<=1280?66:94,contentIntro.style.paddingTop=header.offsetHeight+e+"px"};updateStyles();const section=document.querySelectorAll("section");let lastScrollTop=0;function scrollHeaderUp(){let e=window.scrollY;header.style.transform=e>lastScrollTop?"translate(-50%, -200%)":"translate(-50%, 0)",0===e&&(header.classList.remove("hidden"),header.style.transform="translate(-50%, 0)"),lastScrollTop=e}scrollHeaderUp(),window.addEventListener("scroll",(()=>{scrollHeaderUp()}));const logosContainer=document.querySelector(".intro__logos"),logos=document.querySelectorAll(".intro__logo"),logoWidth=document.querySelector(".intro__logo");let scrollPosition=0;const speed=.3;console.log(logoWidth.offsetWidth);const getVisibleLogosCount=()=>Array.from(logos).filter((e=>"none"!==e.style.display&&null!==e.offsetParent)).length;let visibleLogosCount=getVisibleLogosCount(),totalWidth=visibleLogosCount*logoWidth.offsetWidth;function animateScroll(){scrollPosition+=.3,scrollPosition>totalWidth&&(scrollPosition=0),logosContainer.style.transform=`translateX(-${scrollPosition}px)`,requestAnimationFrame(animateScroll)}console.log(totalWidth),animateScroll(),window.addEventListener("resize",(()=>{updateStyles()}));const btnFormClose=document.querySelector(".popup__btn-close"),popupForm=document.querySelector(".popup-form"),popupInfo=document.querySelector(".popup-card"),btnFormOpen=document.querySelectorAll(".btn-popup");function openPopup(e){e.classList.add("open"),document.addEventListener("keydown",closePopupEsc),hideScroll(),header.style.opacity="0",updateStyles()}btnFormOpen.forEach((e=>{e.addEventListener("click",(()=>{openPopup(popupForm)}))})),popupForm.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&closePopup(popupForm)})),popupInfo.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&closePopup(popupInfo)}));const burgerMenu=document.querySelector(".btn-menu"),mobileMenu=document.querySelector(".mobile-menu"),btnMenuClose=document.querySelector(".mobile-menu__btn-close"),linkMenu=document.querySelectorAll(".menu-link-js");function hideScroll(){pageBody.classList.toggle("stop-scroll")}burgerMenu.addEventListener("click",(()=>{mobileMenu.classList.add("open"),hideScroll()})),btnMenuClose.addEventListener("click",(()=>{mobileMenu.classList.remove("open"),hideScroll()})),linkMenu.forEach((e=>{e.addEventListener("click",(()=>{mobileMenu.classList.remove("open"),btnMenuClose.classList.remove("open"),hideScroll()}))}));const filtersBtnType=document.querySelectorAll(".type-car .filters__btn"),filtersBtnElse=document.querySelectorAll(".type-else .filters__btn");function removeActiveClass(e){e.forEach((e=>{e.classList.remove("active")}))}filtersBtnType.forEach((e=>{e.addEventListener("click",(()=>{removeActiveClass(filtersBtnType),e.classList.add("active")}))})),filtersBtnElse.forEach((e=>{e.addEventListener("click",(()=>{removeActiveClass(filtersBtnElse),e.classList.add("active")}))}));const sendForm=document.forms.formPopup,popupSuccess=document.querySelector(".form-success"),btnSuccessClose=document.querySelector(".form-success__btn-close"),btnSuccessCloseBottom=document.querySelector(".form-success__btn");function closePopup(e){e.classList.remove("open"),hideScroll(),document.removeEventListener("keydown",closePopupEsc),header.style.opacity="1",sendForm.reset(),document.body.style.paddingRight="",updateStyles()}function closePopupEsc(e){if("Escape"===e.key){closePopup(document.querySelector(".open"))}}popupSuccess.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&closePopup(popupSuccess)}));const btnPopupCardClose=document.querySelector(".popup-card .popup__btn-close");btnFormClose.addEventListener("click",(()=>closePopup(popupForm))),btnSuccessClose.addEventListener("click",(()=>closePopup(popupSuccess))),btnSuccessCloseBottom.addEventListener("click",(()=>closePopup(popupSuccess))),btnPopupCardClose.addEventListener("click",(()=>closePopup(popupInfo))),AOS.init({offset:120,duration:400,easing:"linear"});const btnScrollUp=document.querySelector(".btn-scroll-up");btnScrollUp.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).noUiSlider={})}(this,(function(e){"use strict";function t(e){return"object"==typeof e&&"function"==typeof e.to}function r(e){e.parentElement.removeChild(e)}function n(e){return null!=e}function o(e){e.preventDefault()}function i(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function s(e,t,r){0<r&&(u(e,t),setTimeout((function(){d(e,t)}),r))}function a(e){return Math.max(Math.min(e,100),0)}function l(e){return Array.isArray(e)?e:[e]}function c(e){return 1<(e=(e=String(e)).split(".")).length?e[1].length:0}function u(e,t){e.classList&&!/\s/.test(t)?e.classList.add(t):e.className+=" "+t}function d(e,t){e.classList&&!/\s/.test(t)?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function p(e){var t=void 0!==window.pageXOffset,r="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:(r?e.documentElement:e.body).scrollLeft,y:t?window.pageYOffset:(r?e.documentElement:e.body).scrollTop}}function f(e,t){return 100/(t-e)}function m(e,t,r){return 100*t/(e[r+1]-e[r])}function h(e,t){for(var r=1;e>=t[r];)r+=1;return r}e.PipsMode=void 0,(J=e.PipsMode||(e.PipsMode={})).Range="range",J.Steps="steps",J.Positions="positions",J.Count="count",J.Values="values",e.PipsType=void 0,(J=e.PipsType||(e.PipsType={}))[J.None=-1]="None",J[J.NoValue=0]="NoValue",J[J.LargeValue=1]="LargeValue",J[J.SmallValue=2]="SmallValue";var g=(y.prototype.getDistance=function(e){for(var t=[],r=0;r<this.xNumSteps.length-1;r++)t[r]=m(this.xVal,e,r);return t},y.prototype.getAbsoluteDistance=function(e,t,r){var n=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[n+1];)n++;else e===this.xPct[this.xPct.length-1]&&(n=this.xPct.length-2);r||e!==this.xPct[n+1]||n++;for(var o,i=1,s=(t=null===t?[]:t)[n],a=0,l=0,c=0,u=r?(e-this.xPct[n])/(this.xPct[n+1]-this.xPct[n]):(this.xPct[n+1]-e)/(this.xPct[n+1]-this.xPct[n]);0<s;)o=this.xPct[n+1+c]-this.xPct[n+c],100<t[n+c]*i+100-100*u?(a=o*u,i=(s-100*u)/t[n+c],u=1):(a=t[n+c]*o/100*i,i=0),r?(l-=a,1<=this.xPct.length+c&&c--):(l+=a,1<=this.xPct.length-c&&c++),s=t[n+c]*i;return e+l},y.prototype.toStepping=function(e){return function(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=e[(i=h(r,e))-1],o=e[i],i=(e=t[i-1],t[i]);return e+m(o=[n,o],o[0]<0?r+Math.abs(o[0]):r-o[0],0)/f(e,i)}(this.xVal,this.xPct,e)},y.prototype.fromStepping=function(e){return function(e,t,r){if(100<=r)return e.slice(-1)[0];var n,o=e[(n=h(r,t))-1],i=e[n];return(r-(e=t[n-1]))*f(e,n=t[n])*((i=[o,i])[1]-i[0])/100+i[0]}(this.xVal,this.xPct,e)},y.prototype.getStep=function(e){return function(e,t,r,n){if(100===n)return n;var o=h(n,e),i=e[o-1],s=e[o];return r?(s-i)/2<n-i?s:i:t[o-1]?e[o-1]+(e=n-e[o-1],o=t[o-1],Math.round(e/o)*o):n}(this.xPct,this.xSteps,this.snap,e)},y.prototype.getDefaultStep=function(e,t,r){var n=h(e,this.xPct);return(100===e||t&&e===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},y.prototype.getNearbySteps=function(e){return e=h(e,this.xPct),{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},y.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(c);return Math.max.apply(null,e)},y.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},y.prototype.convert=function(e){return this.getStep(this.toStepping(e))},y.prototype.handleEntryPoint=function(e,t){if(!i(e="min"===e?0:"max"===e?100:parseFloat(e))||!i(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(e),this.xVal.push(t[0]),t=Number(t[1]),e?this.xSteps.push(!isNaN(t)&&t):isNaN(t)||(this.xSteps[0]=t),this.xHighestCompleteStep.push(0)},y.prototype.handleStepPoint=function(e,t){t&&(this.xVal[e]!==this.xVal[e+1]?(this.xSteps[e]=m([this.xVal[e],this.xVal[e+1]],t,0)/f(this.xPct[e],this.xPct[e+1]),t=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],t=Math.ceil(Number(t.toFixed(3))-1),t=this.xVal[e]+this.xNumSteps[e]*t,this.xHighestCompleteStep[e]=t):this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e])},y);function y(e,t,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=t;var o=[];for(Object.keys(e).forEach((function(t){o.push([l(e[t]),t])})),o.sort((function(e,t){return e[0][0]-t[0][0]})),n=0;n<o.length;n++)this.handleEntryPoint(o[n][1],o[n][0]);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)this.handleStepPoint(n,this.xNumSteps[n])}var v={to:function(e){return void 0===e?"":e.toFixed(2)},from:Number},S={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},b=".__tooltips",C=".__aria";function x(e,t){if(!i(t))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=t}function E(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=t}function w(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=t}function _(e,t){if(!i(t))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=t}function L(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new g(t,e.snap||!1,e.singleStep)}function P(e,t){if(t=l(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=t.length,e.start=t}function q(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=t}function k(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=t}function A(e,t){if("number"!=typeof t)throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=t}function M(e,t){var r,n=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(r=1;r<e.handles;r++)n.push(t);n.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");n=t}e.connect=n}function T(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function N(e,t){if(!i(t))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==t&&(e.margin=e.spectrum.getDistance(t))}function B(e,t){if(!i(t))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(t),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function V(e,t){var r;if(!i(t)&&!Array.isArray(t))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!i(t[0])&&!i(t[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){for(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getDistance(t[0]),e.spectrum.getDistance(t[1])],r=0;r<e.spectrum.xNumSteps.length-1;r++)if(e.padding[0][r]<0||e.padding[1][r]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=t[0]+t[1];t=e.spectrum.xVal[0];if(1<n/(e.spectrum.xVal[e.spectrum.xVal.length-1]-t))throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function U(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function F(e,t){if("string"!=typeof t)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var r=0<=t.indexOf("tap"),n=0<=t.indexOf("drag"),o=0<=t.indexOf("fixed"),i=0<=t.indexOf("snap"),s=0<=t.indexOf("hover"),a=0<=t.indexOf("unconstrained"),l=0<=t.indexOf("invert-connects"),c=0<=t.indexOf("drag-all");t=0<=t.indexOf("smooth-steps");if(o){if(2!==e.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");N(e,e.start[1]-e.start[0])}if(l&&2!==e.handles)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(a&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||i,drag:n,dragAll:c,smoothSteps:t,fixed:o,snap:i,hover:s,unconstrained:a,invertConnects:l}}function I(e,r){if(!1!==r)if(!0===r||t(r)){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(r)}else{if((r=l(r)).length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");r.forEach((function(e){if("boolean"!=typeof e&&!t(e))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),e.tooltips=r}}function O(e,t){if(t.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=t}function D(e,r){if(!t(r))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=r}function H(e,r){if(!t(n=r)||"function"!=typeof n.from)throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");var n;e.format=r}function j(e,t){if("boolean"!=typeof t)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=t}function R(e,t){e.documentElement=t}function z(e,t){if("string"!=typeof t&&!1!==t)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function $(e,t){if("object"!=typeof t)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof e.cssPrefix?(e.cssClasses={},Object.keys(t).forEach((function(r){e.cssClasses[r]=e.cssPrefix+t[r]}))):e.cssClasses=t}function W(e){var t={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:v,format:v},r={step:{r:!1,t:x},keyboardPageMultiplier:{r:!1,t:E},keyboardMultiplier:{r:!1,t:w},keyboardDefaultStep:{r:!1,t:_},start:{r:!0,t:P},connect:{r:!0,t:M},direction:{r:!0,t:U},snap:{r:!1,t:q},animate:{r:!1,t:k},animationDuration:{r:!1,t:A},range:{r:!0,t:L},orientation:{r:!1,t:T},margin:{r:!1,t:N},limit:{r:!1,t:B},padding:{r:!1,t:V},behaviour:{r:!0,t:F},ariaFormat:{r:!1,t:D},format:{r:!1,t:H},tooltips:{r:!1,t:I},keyboardSupport:{r:!0,t:j},documentElement:{r:!1,t:R},cssPrefix:{r:!0,t:z},cssClasses:{r:!0,t:$},handleAttributes:{r:!1,t:O}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:S,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(r).forEach((function(i){if(n(e[i])||void 0!==o[i])r[i].t(t,(n(e[i])?e:o)[i]);else if(r[i].r)throw new Error("noUiSlider: '"+i+"' is required.")})),t.pips=e.pips;var i=void 0!==(s=document.createElement("div")).style.msTransform,s=void 0!==s.style.transform;return t.transformRule=s?"transform":i?"msTransform":"webkitTransform",t.style=[["left","top"],["right","bottom"]][t.dir][t.ort],t}function X(t,i,c){var f,m,h,g,y,v,S=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},x=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),E=t,w=i.spectrum,_=[],L=[],P=[],q=0,k={},A=!1,T=t.ownerDocument,N=i.documentElement||T.documentElement,B=T.body,V="rtl"===T.dir||1===i.ort?0:100;function U(e,t){var r=T.createElement("div");return t&&u(r,t),e.appendChild(r),r}function F(e,t){e=U(e,i.cssClasses.origin);var r,n=U(e,i.cssClasses.handle);return U(n,i.cssClasses.touchArea),n.setAttribute("data-handle",String(t)),i.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",(function(e){return function(e,t){if(D()||H(t))return!1;var r=["Left","Right"],n=["Down","Up"],o=["PageDown","PageUp"],s=["Home","End"];i.dir&&!i.ort?r.reverse():i.ort&&!i.dir&&(n.reverse(),o.reverse());var a=e.key.replace("Arrow",""),l=a===o[0],c=a===o[1];o=a===n[0]||a===r[0]||l,n=a===n[1]||a===r[1]||c,r=a===s[0],s=a===s[1];if(!(o||n||r||s))return!0;if(e.preventDefault(),n||o){var u=o?0:1;if(null===(u=ve(t)[u]))return!1;!1===u&&(u=w.getDefaultStep(L[t],o,i.keyboardDefaultStep)),u*=c||l?i.keyboardPageMultiplier:i.keyboardMultiplier,u=Math.max(u,1e-7),u*=o?-1:1,u=_[t]+u}else u=s?i.spectrum.xVal[i.spectrum.xVal.length-1]:i.spectrum.xVal[0];return fe(t,w.toStepping(u),!0,!0),se("slide",t),se("update",t),se("change",t),se("set",t),!1}(e,t)}))),void 0!==i.handleAttributes&&(r=i.handleAttributes[t],Object.keys(r).forEach((function(e){n.setAttribute(e,r[e])}))),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===t?u(n,i.cssClasses.handleLower):t===i.handles-1&&u(n,i.cssClasses.handleUpper),e.handle=n,e}function I(e,t){return!!t&&U(e,i.cssClasses.connect)}function O(e,t){return!(!i.tooltips||!i.tooltips[t])&&U(e.firstChild,i.cssClasses.tooltip)}function D(){return E.hasAttribute("disabled")}function H(e){return h[e].hasAttribute("disabled")}function j(){v&&(ie("update"+b),v.forEach((function(e){e&&r(e)})),v=null)}function R(){j(),v=h.map(O),oe("update"+b,(function(e,t,r){v&&i.tooltips&&!1!==v[t]&&(e=e[t],!0!==i.tooltips[t]&&(e=i.tooltips[t].to(r[t])),v[t].innerHTML=e)}))}function z(e,t){return e.map((function(e){return w.fromStepping(t?w.getStep(e):e)}))}function $(){y&&(r(y),y=null)}function X(t){$();var r=function(t){var r=function(t){if(t.mode===e.PipsMode.Range||t.mode===e.PipsMode.Steps)return w.xVal;if(t.mode!==e.PipsMode.Count)return t.mode===e.PipsMode.Positions?z(t.values,t.stepped):t.mode===e.PipsMode.Values?t.stepped?t.values.map((function(e){return w.fromStepping(w.getStep(w.toStepping(e)))})):t.values:[];if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var r=t.values-1,n=100/r,o=[];r--;)o[r]=r*n;return o.push(100),z(o,t.stepped)}(t),n={},o=w.xVal[0],i=w.xVal[w.xVal.length-1],s=!1,a=!1,l=0;return(r=r.slice().sort((function(e,t){return e-t})).filter((function(e){return!this[e]&&(this[e]=!0)}),{}))[0]!==o&&(r.unshift(o),s=!0),r[r.length-1]!==i&&(r.push(i),a=!0),r.forEach((function(o,i){var c,u,d,p,f,m,h,g,y=r[i+1],v=t.mode===e.PipsMode.Steps,S=(S=v?w.xNumSteps[i]:S)||y-o;for(void 0===y&&(y=o),S=Math.max(S,1e-7),c=o;c<=y;c=Number((c+S).toFixed(7))){for(m=(p=(d=w.toStepping(c))-l)/(t.density||1),g=p/(h=Math.round(m)),u=1;u<=h;u+=1)n[(f=l+u*g).toFixed(5)]=[w.fromStepping(f),0];m=-1<r.indexOf(c)?e.PipsType.LargeValue:v?e.PipsType.SmallValue:e.PipsType.NoValue,!i&&s&&c!==y&&(m=0),c===y&&a||(n[d.toFixed(5)]=[c,m]),l=d}})),n}(t),n=t.filter;t=t.format||{to:function(e){return String(Math.round(e))}};return y=E.appendChild(function(t,r,n){var o,s=T.createElement("div"),a=((o={})[e.PipsType.None]="",o[e.PipsType.NoValue]=i.cssClasses.valueNormal,o[e.PipsType.LargeValue]=i.cssClasses.valueLarge,o[e.PipsType.SmallValue]=i.cssClasses.valueSub,o),l=((o={})[e.PipsType.None]="",o[e.PipsType.NoValue]=i.cssClasses.markerNormal,o[e.PipsType.LargeValue]=i.cssClasses.markerLarge,o[e.PipsType.SmallValue]=i.cssClasses.markerSub,o),c=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],d=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function p(e,t){var r=t===i.cssClasses.value;return t+" "+(r?c:d)[i.ort]+" "+(r?a:l)[e]}return u(s,i.cssClasses.pips),u(s,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(t).forEach((function(o){var a,l,c;l=t[a=o][0],c=t[o][1],(c=r?r(l,c):c)!==e.PipsType.None&&((o=U(s,!1)).className=p(c,i.cssClasses.marker),o.style[i.style]=a+"%",c>e.PipsType.NoValue&&((o=U(s,!1)).className=p(c,i.cssClasses.value),o.setAttribute("data-value",String(l)),o.style[i.style]=a+"%",o.innerHTML=String(n.to(l))))})),s}(r,n,t))}function Y(){var e=f.getBoundingClientRect(),t="offset"+["Width","Height"][i.ort];return 0===i.ort?e.width||f[t]:e.height||f[t]}function J(e,t,r,n){function o(o){var s,a=function(e,t,r){var n=0===e.type.indexOf("touch"),o=0===e.type.indexOf("mouse"),i=0===e.type.indexOf("pointer"),s=0,a=0;if(0===e.type.indexOf("MSPointer")&&(i=!0),"mousedown"===e.type&&!e.buttons&&!e.touches)return!1;if(n){var l=function(t){return(t=t.target)===r||r.contains(t)||e.composed&&e.composedPath().shift()===r};if("touchstart"===e.type){if(1<(n=Array.prototype.filter.call(e.touches,l)).length)return!1;s=n[0].pageX,a=n[0].pageY}else{if(!(l=Array.prototype.find.call(e.changedTouches,l)))return!1;s=l.pageX,a=l.pageY}}return t=t||p(T),(o||i)&&(s=e.clientX+t.x,a=e.clientY+t.y),e.pageOffset=t,e.points=[s,a],e.cursor=o||i,e}(o,n.pageOffset,n.target||t);return!!a&&!(D()&&!n.doNotReject)&&(s=E,o=i.cssClasses.tap,!((s.classList?s.classList.contains(o):new RegExp("\\b"+o+"\\b").test(s.className))&&!n.doNotReject)&&!(e===S.start&&void 0!==a.buttons&&1<a.buttons)&&(!n.hover||!a.buttons)&&(x||a.preventDefault(),a.calcPoint=a.points[i.ort],void r(a,n)))}var s=[];return e.split(" ").forEach((function(e){t.addEventListener(e,o,!!x&&{passive:!0}),s.push([e,o])})),s}function Z(e){var t,r,n=a(n=100*(e-(n=f,t=i.ort,r=n.getBoundingClientRect(),n=(e=n.ownerDocument).documentElement,e=p(e),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(e.x=0),t?r.top+e.y-n.clientTop:r.left+e.x-n.clientLeft))/Y());return i.dir?100-n:n}function G(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&Q(e,t)}function K(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return Q(e,t);ce(0<(e=(i.dir?-1:1)*(e.calcPoint-t.startCalcPoint)),100*e/t.baseSize,t.locations,t.handleNumbers,t.connect)}function Q(e,t){t.handle&&(d(t.handle,i.cssClasses.active),--q),t.listeners.forEach((function(e){N.removeEventListener(e[0],e[1])})),0===q&&(d(E,i.cssClasses.drag),pe(),e.cursor&&(B.style.cursor="",B.removeEventListener("selectstart",o))),i.events.smoothSteps&&(t.handleNumbers.forEach((function(e){fe(e,L[e],!0,!0,!1,!1)})),t.handleNumbers.forEach((function(e){se("update",e)}))),t.handleNumbers.forEach((function(e){se("change",e),se("set",e),se("end",e)}))}function ee(e,t){var r,n,s,a;t.handleNumbers.some(H)||(1===t.handleNumbers.length&&(a=h[t.handleNumbers[0]].children[0],q+=1,u(a,i.cssClasses.active)),e.stopPropagation(),n=J(S.move,N,K,{target:e.target,handle:a,connect:t.connect,listeners:r=[],startCalcPoint:e.calcPoint,baseSize:Y(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:L.slice()}),s=J(S.end,N,Q,{target:e.target,handle:a,listeners:r,doNotReject:!0,handleNumbers:t.handleNumbers}),a=J("mouseout",N,G,{target:e.target,handle:a,listeners:r,doNotReject:!0,handleNumbers:t.handleNumbers}),r.push.apply(r,n.concat(s,a)),e.cursor&&(B.style.cursor=getComputedStyle(e.target).cursor,1<h.length&&u(E,i.cssClasses.drag),B.addEventListener("selectstart",o,!1)),t.handleNumbers.forEach((function(e){se("start",e)})))}function te(e){e.stopPropagation();var t,r,n,o=Z(e.calcPoint),a=(t=o,n=!(r=100),h.forEach((function(e,o){var i,s;H(o)||(i=L[o],((s=Math.abs(i-t))<r||s<=r&&i<t||100===s&&100===r)&&(n=o,r=s))})),n);!1!==a&&(i.events.snap||s(E,i.cssClasses.tap,i.animationDuration),fe(a,o,!0,!0),pe(),se("slide",a,!0),se("update",a,!0),i.events.snap?ee(e,{handleNumbers:[a]}):(se("change",a,!0),se("set",a,!0)))}function re(e){e=Z(e.calcPoint),e=w.getStep(e);var t=w.fromStepping(e);Object.keys(k).forEach((function(e){"hover"===e.split(".")[0]&&k[e].forEach((function(e){e.call(be,t)}))}))}function ne(e){e.fixed||h.forEach((function(e,t){J(S.start,e.children[0],ee,{handleNumbers:[t]})})),e.tap&&J(S.start,f,te,{}),e.hover&&J(S.move,f,re,{hover:!0}),e.drag&&g.forEach((function(t,r){var n,o,s,a,l;!1!==t&&0!==r&&r!==g.length-1&&(n=h[r-1],o=h[r],s=[t],a=[n,o],l=[r-1,r],u(t,i.cssClasses.draggable),e.fixed&&(s.push(n.children[0]),s.push(o.children[0])),e.dragAll&&(a=h,l=P),s.forEach((function(e){J(S.start,e,ee,{handles:a,handleNumbers:l,connect:t})})))}))}function oe(e,t){k[e]=k[e]||[],k[e].push(t),"update"===e.split(".")[0]&&h.forEach((function(e,t){se("update",t)}))}function ie(e){var t=e&&e.split(".")[0],r=t?e.substring(t.length):e;Object.keys(k).forEach((function(e){var n=e.split(".")[0],o=e.substring(n.length);t&&t!==n||r&&r!==o||((n=o)!==C&&n!==b||r===o)&&delete k[e]}))}function se(e,t,r){Object.keys(k).forEach((function(n){var o=n.split(".")[0];e===o&&k[n].forEach((function(e){e.call(be,_.map(i.format.to),t,_.slice(),r||!1,L.slice(),be)}))}))}function ae(e,t,r,n,o,s,l){var c;return 1<h.length&&!i.events.unconstrained&&(n&&0<t&&(c=w.getAbsoluteDistance(e[t-1],i.margin,!1),r=Math.max(r,c)),o&&t<h.length-1&&(c=w.getAbsoluteDistance(e[t+1],i.margin,!0),r=Math.min(r,c))),1<h.length&&i.limit&&(n&&0<t&&(c=w.getAbsoluteDistance(e[t-1],i.limit,!1),r=Math.min(r,c)),o&&t<h.length-1&&(c=w.getAbsoluteDistance(e[t+1],i.limit,!0),r=Math.max(r,c))),i.padding&&(0===t&&(c=w.getAbsoluteDistance(0,i.padding[0],!1),r=Math.max(r,c)),t===h.length-1&&(c=w.getAbsoluteDistance(100,i.padding[1],!0),r=Math.min(r,c))),!((r=a(r=l?r:w.getStep(r)))===e[t]&&!s)&&r}function le(e,t){var r=i.ort;return(r?t:e)+", "+(r?e:t)}function ce(e,t,r,n,o){var s=r.slice(),a=n[0],l=i.events.smoothSteps,c=[!e,e],u=[e,!e];n=n.slice(),e&&n.reverse(),1<n.length?n.forEach((function(e,r){!1===(r=ae(s,e,s[e]+t,c[r],u[r],!1,l))?t=0:(t=r-s[e],s[e]=r)})):c=u=[!0];var d=!1;n.forEach((function(e,n){d=fe(e,r[e]+t,c[n],u[n],!1,l)||d})),d&&(n.forEach((function(e){se("update",e),se("slide",e)})),null!=o&&se("drag",a))}function ue(e,t){return i.dir?100-e-t:e}function de(e,t){if(L[e]=t,_[e]=w.fromStepping(t),t="translate("+le(ue(t,0)-V+"%","0")+")",h[e].style[i.transformRule]=t,i.events.invertConnects&&1<L.length&&(t=L.every((function(e,t,r){return 0===t||e>=r[t-1]})),A!==!t))return A=!A,M(i,i.connect.map((function(e){return!e}))),void Se();me(e),me(e+1),A&&(me(e-1),me(e+2))}function pe(){P.forEach((function(e){var t=50<L[e]?-1:1;t=3+(h.length+t*e);h[e].style.zIndex=String(t)}))}function fe(e,t,r,n,o,i){return!1!==(t=o?t:ae(L,e,t,r,n,!1,i))&&(de(e,t),!0)}function me(e){var t,r,n;g[e]&&(t=L.slice(),A&&t.sort((function(e,t){return e-t})),n=100,r="translate("+le(ue(r=(r=0)!==e?t[e-1]:r,n=(n=e!==g.length-1?t[e]:n)-r)+"%","0")+")",n="scale("+le(n/100,"1")+")",g[e].style[i.transformRule]=r+" "+n)}function he(e,t){return null===e||!1===e||void 0===e?L[t]:("number"==typeof e&&(e=String(e)),!1===(e=!1!==(e=i.format.from(e))?w.toStepping(e):e)||isNaN(e)?L[t]:e)}function ge(e,t,r){var n=l(e);e=void 0===L[0];t=void 0===t||t,i.animate&&!e&&s(E,i.cssClasses.tap,i.animationDuration),P.forEach((function(e){fe(e,he(n[e],e),!0,!1,r)}));var o,a=1===P.length?0:1;for(e&&w.hasNoSize()&&(r=!0,L[0]=0,1<P.length&&(o=100/(P.length-1),P.forEach((function(e){L[e]=e*o}))));a<P.length;++a)P.forEach((function(e){fe(e,L[e],!0,!0,r)}));pe(),P.forEach((function(e){se("update",e),null!==n[e]&&t&&se("set",e)}))}function ye(e){return(e=void 0!==e&&e)?1===_.length?_[0]:_.slice(0):1===(e=_.map(i.format.to)).length?e[0]:e}function ve(e){var t=L[e],r=w.getNearbySteps(t),n=_[e],o=r.thisStep.step;e=null;return i.snap?[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null]:(!1!==o&&n+o>r.stepAfter.startValue&&(o=r.stepAfter.startValue-n),e=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===t?o=null:0===t&&(e=null),t=w.countStepDecimals(),null!==o&&!1!==o&&(o=Number(o.toFixed(t))),[e=null!==e&&!1!==e?Number(e.toFixed(t)):e,o])}function Se(){for(;m.firstChild;)m.removeChild(m.firstChild);for(var e=0;e<=i.handles;e++)g[e]=I(m,i.connect[e]),me(e);ne({drag:i.events.drag,fixed:!0})}u(t=E,i.cssClasses.target),0===i.dir?u(t,i.cssClasses.ltr):u(t,i.cssClasses.rtl),0===i.ort?u(t,i.cssClasses.horizontal):u(t,i.cssClasses.vertical),u(t,"rtl"===getComputedStyle(t).direction?i.cssClasses.textDirectionRtl:i.cssClasses.textDirectionLtr),f=U(t,i.cssClasses.base),function(e,t){m=U(t,i.cssClasses.connects),h=[],(g=[]).push(I(m,e[0]));for(var r=0;r<i.handles;r++)h.push(F(t,r)),P[r]=r,g.push(I(m,e[r+1]))}(i.connect,f),ne(i.events),ge(i.start),i.pips&&X(i.pips),i.tooltips&&R(),ie("update"+C),oe("update"+C,(function(e,t,r,n,o){P.forEach((function(e){var t=h[e],n=ae(L,e,0,!0,!0,!0),s=ae(L,e,100,!0,!0,!0),a=o[e];e=String(i.ariaFormat.to(r[e])),n=w.fromStepping(n).toFixed(1),s=w.fromStepping(s).toFixed(1),a=w.fromStepping(a).toFixed(1);t.children[0].setAttribute("aria-valuemin",n),t.children[0].setAttribute("aria-valuemax",s),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",e)}))}));var be={destroy:function(){for(ie(C),ie(b),Object.keys(i.cssClasses).forEach((function(e){d(E,i.cssClasses[e])}));E.firstChild;)E.removeChild(E.firstChild);delete E.noUiSlider},steps:function(){return P.map(ve)},on:oe,off:ie,get:ye,set:ge,setHandle:function(e,t,r,n){if(!(0<=(e=Number(e))&&e<P.length))throw new Error("noUiSlider: invalid handle number, got: "+e);fe(e,he(t,e),!0,!0,n),se("update",e),r&&se("set",e)},reset:function(e){ge(i.start,e)},disable:function(e){null!=e?(h[e].setAttribute("disabled",""),h[e].handle.removeAttribute("tabindex")):(E.setAttribute("disabled",""),h.forEach((function(e){e.handle.removeAttribute("tabindex")})))},enable:function(e){null!=e?(h[e].removeAttribute("disabled"),h[e].handle.setAttribute("tabindex","0")):(E.removeAttribute("disabled"),h.forEach((function(e){e.removeAttribute("disabled"),e.handle.setAttribute("tabindex","0")})))},__moveHandles:function(e,t,r){ce(e,t,L,r)},options:c,updateOptions:function(e,t){var r=ye(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];o.forEach((function(t){void 0!==e[t]&&(c[t]=e[t])}));var s=W(c);o.forEach((function(t){void 0!==e[t]&&(i[t]=s[t])})),w=s.spectrum,i.margin=s.margin,i.limit=s.limit,i.padding=s.padding,i.pips?X(i.pips):$(),(i.tooltips?R:j)(),L=[],ge(n(e.start)?e.start:r,t),e.connect&&Se()},target:E,removePips:$,removeTooltips:j,getPositions:function(){return L.slice()},getTooltips:function(){return v},getOrigins:function(){return h},pips:X};return be}function Y(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");return t=X(e,W(t),t),e.noUiSlider=t}var J={__spectrum:g,cssClasses:S,create:Y};e.create=Y,e.cssClasses=S,e.default=J,Object.defineProperty(e,"__esModule",{value:!0})}));const showInputError=(e,t,r)=>{const n=e.querySelector(`.${t.id}-error`);t.classList.add("input_type_error"),n.textContent=r,n.classList.add("input-error_active")},hideInputError=(e,t)=>{const r=e.querySelector(`.${t.id}-error`);t.classList.remove("input_type_error"),r.classList.remove("input-error_active"),r.textContent=""},hasInvalidInput=e=>e.some((e=>!e.validity.valid)),toggleButtonState=(e,t,r)=>{hasInvalidInput(e)?(t.disabled=!0,t.classList.add("btn_inactive")):(t.disabled=!1,t.classList.remove("btn_inactive"),r.forEach((e=>{e.textContent=""})))},checkInputValidity=(e,t,r)=>{t.validity.valid?(hideInputError(e,t),r.forEach((e=>{e.textContent=""}))):(formErrorSubmit(r),showInputError(e,t,t.validationMessage))};function checkInputValidityCustom(e){e.validity.patternMismatch?e.setCustomValidity(e.dataset.errorMessage):e.setCustomValidity("")}const setEventListeners=e=>{const t=Array.from(e.querySelectorAll(".input-validation")),r=e.querySelector(".btn-validation"),n=e.querySelector(".text-form-help"),o=Array.from(e.querySelectorAll(".empty-error"));toggleButtonState(t,r,o),r.addEventListener("click",(()=>{let r=!0;if(t.forEach((e=>{e.validity.valid||(r=!1)})),r){let t=e.querySelector(".input-name").value,r=e.querySelector(".input-phone").value,n=e.querySelector(".input-email").value,i=JSON.stringify({name:t,phone:r,email:n});fetch("../php/send.php",{method:"POST",headers:{"Content-Type":"application/json"},body:i}).then((e=>e.text())).then((t=>{console.log("Успех"),closePopup(popupForm),popupSuccess.classList.add("open"),hideScroll(),resetErrorMessage(e,o)})).catch((e=>{formErrorSubmit(o),console.error("Error:",e)}))}})),e.addEventListener("submit",(e=>{e.preventDefault(),toggleButtonState(t,r,o),o.forEach((e=>{e.textContent=""}))})),t.forEach((i=>{i.addEventListener("input",(()=>{checkInputValidityCustom(i),checkInputValidity(e,i,o),checkValidationPhone(i),toggleButtonState(t,r,o),n.style.display="none"}))}))},enableValidation=()=>{Array.from(document.querySelectorAll(".form")).forEach((e=>{e.addEventListener("submit",(function(e){e.preventDefault()})),resetErrorMessage(e,Array.from(e.querySelectorAll(".empty-error"))),setEventListeners(e)}))};function formErrorSubmit(e){e.forEach((e=>{e.textContent="Заполните все поля для отправки формы."}))}function resetErrorMessage(e,t){Array.from(e.querySelectorAll(".input-validation")).forEach((t=>{t.value="",hideInputError(e,t)})),t.forEach((e=>{e.textContent=""}))}enableValidation();const inputPhone=Array.from(document.querySelectorAll(".input-phone")),phoneErrors=Array.from(document.querySelectorAll(".tel-err"));function checkValidationPhone(e){const t=e.value.replace(/\D/g,"");/^[0-9]{11}$/.test(t)?phoneErrors.forEach((e=>{e.textContent=""})):phoneErrors.forEach((e=>{e.textContent="Некорректный номер телефона"}))}inputPhone.forEach((e=>{e.addEventListener("input",(()=>{IMask(e,{mask:"+7(000) 000-00-00"})}))}));